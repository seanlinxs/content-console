{% extends 'main/base.html' %}

{% block content %}

<h1>{% block title %}{{ page.name }}{% endblock %}</h1>

<div class="panel-group" id="accordion">
  <div class="panel panel-default" id="paragraphs-panel">
    <div class="panel-heading">
      <h4 class="panel-title">
	<a data-toggle="collapse" data-target="#paragraphs" href="#paragraphs">Paragraphs</a>
      </h4>
    </div>
    <div class="panel-collaps collapse in" id="paragraphs">
      <div class="panel-body">
	<p><a href="{% url 'main:paragraph_create' site_id=page.site.id page_id=page.id %}" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></a></p>
	<div class="table-responsive">
	  <table class="table table-hover">
	    {% for paragraph in paragraphs %}
	    <tr>
	      <td class="col-md-11">
		<p>
		  <label>{{ paragraph.name }}</label>
		</p>
		<p>
		  {{ paragraph.markdown }}
		</p>
		{% if paragraph.image %}
		<p>
		  <img src="{{ paragraph.image.url }}" alt="{{ paragraph.name }}">
		</p>
		{% endif %}
		{% if paragraph.video_link %}
		<p>
		  <iframe width="640" height="360" src="{{ paragraph.video_link }}" frameborder="0" allowfullscreen></iframe>
		</p>
		{% endif %}
	      </td>
	      <td class="col-md-1">
		<a href="{% url 'main:paragraph_update' site_id=page.site.id page_id=page.id pk=paragraph.id %}" title="Edit">
		  <span class="glyphicon glyphicon-pencil"></span>
		</a>
		<a href="{% url 'main:paragraph_delete' site_id=page.site.id page_id=page.id pk=paragraph.id %}" title="Delete">
		  <span class="glyphicon glyphicon-trash"></span>
		</a>
	      </td>
	    </tr>
	    {% endfor %}
	  </table>
	</div>
      </div>
    </div>
  </div>
  <div class="panel panel-default" id="textblocks-panel">
    <div class="panel-heading">
      <h4 class="panel-title">
	<a data-toggle="collapse" data-target="#textblocks" href="#textblocks">Text blocks</a>
      </h4>
    </div>
    <div class="panel-collaps collapse in" id="textblocks">
      <div class="panel-body">
	<p><a href="{% url 'main:textblock_create' site_id=page.site.id page_id=page.id %}" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></a></p>
	<div class="table-responsive">
	  <table class="table table-hover">
	    {% for textblock in textblocks %}
	    <tr>
	      <td class="col-md-11">
		<p>
		  <label>{{ textblock.name }}</label>
		</p>
		<p>
		  {{ textblock.content }}
		</p>
	      </td>
	      <td class="col-md-1">
		<a href="{% url 'main:textblock_update' site_id=page.site.id page_id=page.id pk=textblock.id %}" title="Edit">
		  <span class="glyphicon glyphicon-pencil"></span>
		</a>
		<a href="{% url 'main:textblock_delete' site_id=page.site.id page_id=page.id pk=textblock.id %}" title="Delete">
		  <span class="glyphicon glyphicon-trash"></span>
		</a>
	      </td>
	    </tr>
	    {% endfor %}	
	  </table>	
	</div>
      </div>
    </div>
  </div>
  <div class="panel panel-default" id="images-panel">
    <div class="panel-heading">
      <h4 class="panel-title">
	<a data-toggle="collapse" data-target="#images" href="#images">Images</a>
      </h4>
    </div>
    <div class="panel-collaps collapse in" id="images">
      <div class="panel-body">
	<p><a href="{% url 'main:pageimage_upload' site_id=page.site.id page_id=page.id %}" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></a></p>
	<div class="table-responsive">
	  <table class="table table-hover">
	    {% for pageimage in pageimages %}
	    <tr>
	      <td>
		<p>
		  <label>{{ pageimage.name }}</label>
		  <a href="{% url 'main:pageimage_update' site_id=page.site.id page_id=page.id pk=pageimage.id %}" title="Edit">
		    <span class="glyphicon glyphicon-pencil"></span>
		  </a>
		  <a href="{% url 'main:pageimage_delete' site_id=page.site.id page_id=page.id pk=pageimage.id %}" title="Delete">
		    <span class="glyphicon glyphicon-trash"></span>
		  </a>
		</p>
		<p><img src="{{ pageimage.image.url }}" alt="{{ pageimage.name }}"></p>
	      </td>
	    </tr>
	    {% endfor %}	
	  </table>	
	</div>
      </div>
    </div>
  </div>
  <div class="panel panel-default" id="videolinks-panel">
    <div class="panel-heading">
      <h4 class="panel-title">
	<a data-toggle="collapse" data-target="#videolinks" href="#videolinks">Video links</a>
      </h4>
    </div>
    <div class="panel-collaps collapse in" id="videolinks">
      <div class="panel-body">
	<p><a href="{% url 'main:videolink_create' site_id=page.site.id page_id=page.id %}" class="btn btn-primary"><span class="glyphicon glyphicon-plus"></span></a></p>
	<div class="table-responsive">
	  <table class="table table-hover">
	    {% for videolink in videolinks %}
	    <tr>
	      <td class="col-md-11">
		<p>{{ videolink.name }}</p>
		<p><iframe width="640" height="360" src="{{ videolink.link }}" frameborder="0" allowfullscreen></iframe></p>
	      </td>
	      <td class="col-md-1">
		<a href="{% url 'main:videolink_update' site_id=page.site.id page_id=page.id pk=videolink.id %}" title="Edit">
		  <span class="glyphicon glyphicon-pencil"></span>
		</a>
		<a href="{% url 'main:videolink_delete' site_id=page.site.id page_id=page.id pk=videolink.id %}" title="Delete">
		  <span class="glyphicon glyphicon-trash"></span>
		</a>
	      </td>
	    </tr>
	    {% endfor %}	
	  </table>	
	</div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
